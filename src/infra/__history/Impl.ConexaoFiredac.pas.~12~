unit Impl.ConexaoFiredac;

interface

uses
  Interfaces.IConexaoFiredac,
  FireDAC.Comp.Client,
  FireDAC.DApt,
  FireDAC.Phys,
  FireDAC.Phys.Intf,
  FireDAC.Phys.MySQL,
  FireDAC.Phys.MySQLDef,
  FireDAC.Phys.MySQLWrapper,
  FireDAC.Stan.Async,
  FireDAC.Stan.Def,
  FireDAC.Stan.Error,
  FireDAC.Stan.Factory,
  FireDAC.Stan.Intf,
  FireDAC.Stan.Option,
  FireDAC.Stan.Pool,
  FireDAC.UI.Intf,
  FireDAC.VCLUI.Wait,
  System.IniFiles,
  System.SysUtils;

type
  TConexaoFiredac = class(TInterfacedObject, IConexaoFiredac)
  private
    FConexao: TFDConnection;
    FLink: TFDPhysMySQLDriverLink;
    FIniFIle: TIniFile;
  public
    constructor Create;
    destructor Destroy; override;
    function Conexao: TFDConnection;
  end;

implementation

{ TConexaoFiredac }

constructor TConexaoFiredac.Create;
begin
  FIniFIle                            := TIniFile.Create(ExtractFilePath(ParamStr(0)) + 'TesteWK.ini');
  FLink                               := TFDPhysMySQLDriverLink.Create(nil);
  FLink.VendorLib                     := ExtractFilePath(ParamStr(0)) + 'libmysql41.dll';
  FConexao                            := TFDConnection.Create(nil);
  FConexao.DriverName                 := 'MySQL';
  FConexao.Params.Values['Server']    := '10.0.0.108';
  FConexao.Params.Values['Database']  := 'teste_wk';
  FConexao.Params.Values['User_Name'] := 'admin';
  FConexao.Params.Values['Password']  := 'C@sinha1404';
  FConexao.Params.Values['Port']      := '3306';
  FConexao.LoginPrompt                := False;
  FConexao.Connected                  := True;
end;

destructor TConexaoFiredac.Destroy;
begin
  FConexao.Free;
  FLink.Free;
  FIniFIle.Free;
  inherited;
end;

function TConexaoFiredac.Conexao: TFDConnection;
begin
  Result := FConexao;
end;

end.
